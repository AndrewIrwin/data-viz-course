---
title: "Alternatives to maps"
author: "Andrew Irwin, a.irwin@dal.ca"
date: "2024-03-21"
format:
  revealjs:
    slide-number: true
    theme:  default
    chalkboard: true
    auto-animate: true
    scrollable: true
    code-block-border-left: true
    code-copy: false
    code-link: true
    history: false
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(ggheatmap)
```

## Plan

* When is a map not appropriate for geospatial data?

* Tile geometry

* Heatmaps with dendrograms

* Specialized heatmap for the USA

## Population maps

![USA population by state](static/L29/us-state-population.png)

::: footer
https://www.everviz.com/chart-examples/choropleth-categories-point-and-pattern-fill-maps/us-state-population-choropleth-map/
:::


## Population maps II

![USA population by county](static/L29/population-density-county-2010.avif)

::: footer
https://www.census.gov/library/visualizations/2010/geo/population-density-county-2010.html
:::


---

![Canada population](static/L29/Canada-province.png)

---

![Canada population](static/L29/Canada2016-ada.jpeg)


## Population maps III

![Canada USA population dot map](static/L29/usa-can-dot-map.png)

::: footer
https://flowingdata.com/2012/12/31/map-of-every-person-counted-in-2010-us-census/
:::

## Nighttime image of Earth

![NASA composite image of night time North America](static/L29/night-dnb_united_states_1000.webp)

## Why shouldn't I use a map?

* Always think about the purpose

* Is geography the most important feature?

* Are you showing points or areas?

* Is your map approximately a population map?

* Will the area of a region complicate interpretation?

* Is the spatial extent one dimensional? What could you do with the other dimension?



## COVID-19 cases & geom_tile

```{r covid-data, message=FALSE, cache=TRUE, echo=FALSE, fig.align="center", out.width="100%", fig.asp = 0.65}
covid <- cansim::get_cansim("13-10-0775-01")
# covid2 <- get_cansim("13-10-0774-01")  # related data with extra information
covid_ss <- covid %>% filter(GEO != "Canada", Gender == "Total, all genders", 
                             `Age group` != "Total, all age groups") %>%
  filter(Statistics == "Community exposures") %>%
  mutate(GEO = str_remove(GEO, " Region"))
covid_ss %>%
  ggplot(aes(y = GEO, x = `Age group`, fill = VALUE)) + 
  geom_tile() +
  theme(axis.text.x = element_text(angle = 90, size=15, hjust = 1, vjust=0.5),
        axis.text.y = element_text(size=14, hjust = 1)) + 
  labs(x = "", y="")
```

## Same data with ggheatmap

```{r message=FALSE, echo=FALSE, fig.align="center", out.width="90%"}
covid_ss4 <- covid_ss %>% select(GEO, `Age group`, VALUE) %>%
  pivot_wider(names_from = GEO, values_from = VALUE) 
data.frame(covid_ss4 %>% select(-`Age group`), 
              row.names = covid_ss4 %>% pull(`Age group`)) %>%
  ggheatmap()
```

## Scale columns to have sum 1

```{r message=FALSE, echo=FALSE, fig.align="center", out.width="90%"}
data.frame(covid_ss4 %>% select(-`Age group`), 
              row.names = covid_ss4 %>% pull(`Age group`)) %>%
  scale(center = FALSE, scale = colSums(.)) %>%
  as.data.frame() %>%
  ggheatmap()
```


## Specialized maps of USA

```{r}
library(statebins)
load("static/L29/election.rda")
m4 <- election %>% ggplot(aes(state = state, fill = pct_trump)) +
  geom_statebins() +
  theme_statebins() +
  labs(fill="Percent Trump")
```

## Specialized maps of USA

```{r fig.align=TRUE, out.width="90%", echo=FALSE, fig.asp=0.75}
m4
```

## Summary

* Maps are very effective for showing points where spatial location is the primary information

* To show quantitative data varying along a transcect, a line or dot plot may be better

* Colour shows larger/smaller, positive/negative, but does not show quantitative values well

* Heatmaps (2 dimensional tiles of colours) can be a good alternative


## Further reading

* Course notes

* Healy Chapter 7



